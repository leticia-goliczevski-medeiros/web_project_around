!function(){"use strict";var e={869:function(e,t,r){e.exports=r.p+"7c0ea9c25b78e7db700e.png"},428:function(e,t,r){e.exports=r.p+"628c1a38836245613d2a.png"}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}r.m=e,r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.b=document.baseURI||self.location.href;var u=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputsSelector=t.inputsSelector,this._buttonElementSelector=t.buttonElementSelector,this._buttonElementClass=t.buttonElementClass,this._errorClass=t.errorClass,this._inputErrorClass=t.inputErrorClass,this._formElement=r},(t=[{key:"enableValidation",value:function(){this._validateInputs()}},{key:"_validateInputs",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._inputsSelector)),r=this._formElement.querySelector(this._buttonElementSelector);this._toggleButtonState(t,r,c),t.forEach((function(n){n.addEventListener("input",(function(){e._isValid(n),e._toggleButtonState(t,r)}))}))}},{key:"_isValid",value:function(e){if(e.validity.valid)this._hideInputError(e);else{var t=e.validationMessage;this._showInputError(e,t)}}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(c.buttonElementClass),t.setAttribute("disabled",!0)):(t.classList.remove(this._buttonElementClass),t.removeAttribute("disabled",!0))}},{key:"_showInputError",value:function(e,t){var r=e.nextElementSibling;e.classList.add(this._inputErrorClass),r.classList.add(this._errorClass),r.textContent=t}},{key:"_hideInputError",value:function(e){var t=e.nextElementSibling;e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),c={inputsSelector:".popup__input",buttonElementSelector:".popup__submit-button",buttonElementClass:"popup__submit-button_inactive",errorClass:"popup__input-error_active",inputErrorClass:"popup__input_type_error"},l=function(){Array.from(document.forms).forEach((function(e){var t=Array.from(e.querySelectorAll(c.inputsSelector));e.reset(),t.forEach((function(e){var t=e.nextElementSibling;e.classList.remove(c.inputErrorClass),t.classList.remove(c.errorClass),t.textContent=""}))}))};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var p=function(){return e=function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=n,this._renderer=o,this._container=document.querySelector(r)},(t=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function m(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var d=function(){return e=function e(t){var r=t.item,n=t.templateSelector,o=t.handleCardClick,i=t.addLike,u=t.removeLike,c=t.user,l=t.removeCard,a=t.handleDeleteClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._item=r,this._name=r.name,this._link=r.link,this._likes=r.likes,this._owner=r.owner,this._cardId=r._id,this._templateSelector=n,this._handleCardClick=o,this._addLike=i,this._removeLike=u,this._user=c,this._userId=c._id,this._removeCard=l,this._handleDeleteClick=a},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".gallery__card").cloneNode(!0)}},{key:"generateCard",value:function(){var e=this;return this._element=this._getTemplate(),this._element.querySelector(".gallery__card-title").textContent=this._name,this._element.querySelector(".gallery__card-title").setAttribute("alt",this._name),this._element.querySelector(".gallery__card-image").src=this._link,this._likeCount=this._likes.length,this._element.querySelector(".gallery__like-count").textContent=this._likeCount,this._likeButton=this._element.querySelector(".gallery__heart-icon"),this._heartIcon=new URL(r(428),r.b),this._heartIconActive=new URL(r(869),r.b),this._likes.some((function(t){if(t._id===e._userId)return!0}))?this._likeButton.setAttribute("src",this._heartIconActive):this._likeButton.setAttribute("src",this._heartIcon),this._setEventListeners(),this._deleteIcon=this._element.querySelector(".gallery__delete-icon"),this._owner._id!==this._userId?this._deleteIcon.classList.add("gallery__delete-icon_inactive"):this._deleteIcon.addEventListener("click",(function(){e._handleDeleteClick(e._cardId,e._element)})),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".gallery__card-image").addEventListener("click",(function(){e._handleCardClick({name:e._name,link:e._link})})),this._likeButton.addEventListener("click",(function(){e._enableLikeButton()}))}},{key:"_enableLikeButton",value:function(){this._heartIconSource=this._likeButton.getAttribute("src"),this._heartIcon.href.includes(this._heartIconSource)?(this._likeButton.setAttribute("src",this._heartIconActive),this._addLike(this._item,this._user),this._likeCount++,this._element.querySelector(".gallery__like-count").textContent=this._likeCount):(this._likeButton.setAttribute("src",this._heartIcon),this._removeLike(this._item,this._userId),this._likeCount--,this._element.querySelector(".gallery__like-count").textContent=this._likeCount)}}])&&h(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}var S=function(){return e=function e(t){var r=t.profileNameSelector,n=t.profileDescriptionSelector;t.user,function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(r),this._profileDescription=document.querySelector(n),this._profilePicture=document.querySelector(".profile__picture")},t=[{key:"getUserInfo",value:function(){return{userName:this._profileName.textContent,userDescription:this._profileDescription.textContent}}},{key:"setUserInfo",value:function(e){this._profileName.textContent=e.name,this._profileDescription.textContent=e.about,this._profilePicture.setAttribute("src",e.avatar)}}],t&&b(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function E(e){var t=function(e){if("object"!=k(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(t)?t:t+""}var w=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._popupSection=this._popup.parentElement,this._popupCloseIcon=this._popup.querySelector(".popup__close-icon"),this._handleEscClose=this._handleEscClose.bind(this),this._handleClickOutside=this._handleClickOutside.bind(this),this.close=this.close.bind(this)},(t=[{key:"open",value:function(){this._popupSection.classList.add("popup_popup_opened"),this.setEventListeners()}},{key:"close",value:function(){this._popupSection.classList.remove("popup_popup_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popupSection.removeEventListener("click",this._handleClickOutside),this._popupCloseIcon.removeEventListener("click",this.close)}},{key:"_handleClickOutside",value:function(e){"SECTION"==e.target.tagName&&this.close()}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popupSection.addEventListener("click",this._handleClickOutside),this._popupCloseIcon.addEventListener("click",this.close)}}])&&g(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function O(e){var t=function(e){if("object"!=C(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},L.apply(null,arguments)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}var q=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=I(t),function(e,t){if(t&&("object"==C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,r||[],I(e).constructor):t.apply(e,r))}(this,t,[e]))._popupImage=r._popup.querySelector(".image-popup__image"),r._popupTitle=r._popup.querySelector(".image-popup__title"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e),r=t,n=[{key:"open",value:function(e){var r,n,o;this._popupImage.src=e.link,this._popupTitle.textContent=e.name,(r=t,n=this,"function"==typeof(o=L(I(1&3?r.prototype:r),"open",n))?function(e){return o.apply(n,e)}:o)([])}}],n&&j(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(w);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function R(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}function U(e,t,r,n){var o=B(N(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},B.apply(null,arguments)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}var V=function(e){function t(e){var r,n=e.popupSelector,o=e.formSubmiter,i=e.formResetter;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=N(t),function(e,t){if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,A()?Reflect.construct(t,r||[],N(e).constructor):t.apply(e,r))}(this,t,[n]))._formSubmiter=o,r._popupForm=r._popup.querySelector(".popup__form"),r._inputs=Array.from(r._popupForm.querySelectorAll(".popup__input")),r._formResetter=i,r._sumbitHandler=r._sumbitHandler.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(t,e),r=t,(n=[{key:"_getInputValues",value:function(){return this._inputs.map((function(e){return e.value}))}},{key:"setEventListeners",value:function(){U(t,"setEventListeners",this,3)([]),this._popupForm.addEventListener("submit",this._sumbitHandler)}},{key:"_sumbitHandler",value:function(e){var t=this._getInputValues();this._formSubmiter(e,t),this.close()}},{key:"close",value:function(){U(t,"close",this,3)([]),this._popupForm.removeEventListener("submit",this._sumbitHandler),this._formResetter()}}])&&D(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(w);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function F(e){var t=function(e){if("object"!=J(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==J(t)?t:t+""}function G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(G=function(){return!!e})()}function z(e,t,r,n){var o=K(Q(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function K(){return K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},K.apply(null,arguments)}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}var X=function(e){function t(e){var r,n=e.popupSelector,o=e.removeCard,i=e.cardId,u=e.DOMElement;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=Q(t),function(e,t){if(t&&("object"==J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,G()?Reflect.construct(t,r||[],Q(e).constructor):t.apply(e,r))}(this,t,[n]))._removeCard=o,r._cardId=i,r._DOMElement=u,r._clickHandler=r._clickHandler.bind(r),r._confirmationButton=document.querySelector(".popup-with-confirmation__submit-button"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(t,e),r=t,(n=[{key:"setEventListeners",value:function(){z(t,"setEventListeners",this,3)([]),this._confirmationButton.addEventListener("click",this._clickHandler)}},{key:"_clickHandler",value:function(){this._removeCard(this._cardId,this._DOMElement),this.close()}},{key:"close",value:function(){z(t,"close",this,3)([]),this._confirmationButton.removeEventListener("click",this._clickHandler)}}])&&M(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(w);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$(n.key),n)}}function $(e){var t=function(e){if("object"!=Y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}var ee,te,re,ne=new(function(){return e=function e(t){var r=t.baseUrl,n=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=r,this._headers=n},(t=[{key:"getUser",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers})}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers})}},{key:"saveProfileInfo",value:function(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})})}},{key:"addCard",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})})}},{key:"addCardLike",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(t),{method:"PUT",headers:this._headers,body:JSON.stringify(e)})}},{key:"removeCardLike",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(t),{method:"DELETE",headers:this._headers,body:JSON.stringify({item:e})})}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers})}},{key:"updateProfilePicture",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}}])&&Z(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())({baseUrl:"https://around.nomoreparties.co/v1/web-ptbr-cohort-13",headers:{authorization:"43bee733-4d07-4864-b830-d3fe06d29659","Content-Type":"application/json"}});function oe(e,t){e.likes.push(t);var r=e._id;ne.addCardLike(e,r).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}function ie(e,t){e.likes=e.likes.filter((function(e){if(e._id!=t)return!0}));var r=e._id;ne.removeCardLike(e,r).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}function ue(e,t){ne.deleteCard(e).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){console.log(e),t.remove()})).catch((function(e){console.log(e)}))}function ce(e,t){new X({popupSelector:".popup-with-confirmation__container",removeCard:ue,cardId:e,DOMElement:t}).open()}var le=new S({profileNameSelector:".profile__name",profileDescriptionSelector:".profile__description"});ne.getUser().then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){ee=e,le.setUserInfo(ee),ne.getInitialCards().then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){console.log(e),re=new q(".image-popup__container"),(te=new p({items:e,renderer:function(e){var t=new d({item:e,templateSelector:"#card-template",handleCardClick:function(e){return re.open(e)},addLike:oe,removeLike:ie,user:ee,removeCard:ue,handleDeleteClick:ce}),r=t.generateCard();te.addItem(r)}},".gallery__cards")).renderItems()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)})),Array.from(document.forms).forEach((function(e){new u(c,e).enableValidation(c,e)}));var ae=new V({popupSelector:".edit-profile-popup__container",formSubmiter:function(e,t){e.preventDefault();var r=t[0],n=t[1],o=document.querySelector(".edit-profile-popup__submit-button");o.textContent="Salvando...",ne.saveProfileInfo(r,n).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){ee=e,le.setUserInfo(ee)})).catch((function(e){console.log(e)})).finally((function(){o.textContent="Salvar"}))},formResetter:l});document.querySelector(".profile__edit-icon").addEventListener("click",(function(){var e=le.getUserInfo();document.querySelector(".edit-profile-popup__input_name").value=e.userName,document.querySelector(".edit-profile-popup__input_about").value=e.userDescription,ae.open()}));var se=new V({popupSelector:".add-card-popup__container",formSubmiter:function(e,t){e.preventDefault();var r=t[0],n=t[1],o=document.querySelector(".add-card-popup__submit-button");o.textContent="Salvando...",ne.addCard(r,n).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){console.log(e);var t=new d({item:e,templateSelector:"#card-template",handleCardClick:function(e){return re.open(e)},addLike:oe,removeLike:ie,user:ee,removeCard:ue,handleDeleteClick:ce}).generateCard();te.addItem(t)})).catch((function(e){console.log(e)})).finally((function(){o.textContent="Criar"})),o.classList.add("popup__submit-button_inactive"),o.setAttribute("disabled",!0)},formResetter:l});document.querySelector(".profile__add-button").addEventListener("click",(function(){se.open()}));var fe=new V({popupSelector:".update-profile-picture-popup__container",formSubmiter:function(e,t){e.preventDefault();var r=t[0],n=document.querySelector(".update-profile-picture-popup__submit-button");n.textContent="Salvando...",ne.updateProfilePicture(r).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){le.setUserInfo(e)})).catch((function(e){console.log(e)})).finally((function(){n.textContent="Salvar"}))},formResetter:l});document.querySelector(".profile__picture-container").addEventListener("click",(function(){fe.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQ0NxQixTQUFRLFdBQ1BJLEVBQWFySyxZQUFjLE9BQzdCLElBR0ZxSyxFQUFhNUssVUFBVUMsSUFBSSxpQ0FDM0IySyxFQUFhMUssYUFBYSxZQUFZLEVBQ3hDLEVBQ0FvRyxhQUFjN0YsSUFHTXBELFNBQVM4QixjQUFjLHdCQUMvQkksaUJBQWlCLFNBQVMsV0FDdENvTCxHQUFxQm5CLE1BQ3ZCLElBRUEsSUFBTXNCLEdBQThCLElBQUkxRSxFQUFjLENBQ3BEcEIsY0FBZSwyQ0FDZnFCLGFBQWMsU0FBQ1YsRUFBT29CLEdBQ3BCcEIsRUFBTTBFLGlCQUVOLElBQU12RixFQUFTaUMsRUFBYSxHQUd0QnVELEVBQVNqTixTQUFTOEIsY0FDdEIsZ0RBRUZtTCxFQUFPL0osWUFBYyxjQUVyQmtILEdBQ0dzRCxxQkFBcUJqRyxHQUNyQjBELE1BQUssU0FBQ0MsR0FDTCxPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOQyxRQUFRQyxPQUFPLFVBQURiLE9BQVdTLEVBQUlLLFFBQ3RDLElBQ0NOLE1BQUssU0FBQ3dDLEdBQ0x2QixHQUFTRSxZQUFZcUIsRUFDdkIsSUFDQzlCLE9BQU0sU0FBQ0MsR0FDTkgsUUFBUUMsSUFBSUUsRUFDZCxJQUNDcUIsU0FBUSxXQUNQRixFQUFPL0osWUFBYyxRQUN2QixHQUNKLEVBQ0ErRixhQUFjN0YsSUFFT3BELFNBQVM4QixjQUFjLCtCQUMvQkksaUJBQWlCLFNBQVMsV0FDdkN1TCxHQUE0QnRCLE1BQzlCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvcGFnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9BUEkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmIgPSBkb2N1bWVudC5iYXNlVVJJIHx8IHNlbGYubG9jYXRpb24uaHJlZjtcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQ3OTI6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbi8vIG5vIG9uIGNodW5rcyBsb2FkZWRcblxuLy8gbm8ganNvbnAgZnVuY3Rpb24iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRzU2VsZWN0b3IgPSBjb25maWcuaW5wdXRzU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50U2VsZWN0b3IgPSBjb25maWcuYnV0dG9uRWxlbWVudFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudENsYXNzID0gY29uZmlnLmJ1dHRvbkVsZW1lbnRDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3ZhbGlkYXRlSW5wdXRzKCk7XHJcbiAgfVxyXG4gIF92YWxpZGF0ZUlucHV0cygpIHtcclxuICAgIGNvbnN0IGlucHV0cyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRzU2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnRTZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0cywgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcclxuXHJcbiAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dHMsIGJ1dHRvbkVsZW1lbnQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfaXNWYWxpZChpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIGNvbnN0IGlucHV0RWxlbWVudFZhbGlkYXRpb25NZXNzYWdlID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudFZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dHMsIGJ1dHRvbkVsZW1lbnQpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRzKSkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmJ1dHRvbkVsZW1lbnRDbGFzcyk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fYnV0dG9uRWxlbWVudENsYXNzKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50VmFsaWRhdGlvbk1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGlucHV0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50VmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgfVxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGlucHV0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dHMpIHtcclxuICAgIHJldHVybiBpbnB1dHMuc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKiB0YXJlZmEgZXh0cmEgZG8gc3ByaW50IDk6IHJlc2V0YXIgZm9ybXVsw6FyaW8gcXVhbmRvIG8gcG9wdXAgw6kgZmVjaGFkbyAgKi9cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBpbnB1dHNTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgYnV0dG9uRWxlbWVudFNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGJ1dHRvbkVsZW1lbnRDbGFzczogXCJwb3B1cF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlc2V0VmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQuZm9ybXMpO1xyXG5cclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShcclxuICAgICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRzU2VsZWN0b3IpXHJcbiAgICApO1xyXG5cclxuICAgIGZvcm1FbGVtZW50LnJlc2V0KCk7XHJcblxyXG4gICAgaW5wdXRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBpbnB1dEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3Ioe1xyXG4gICAgaXRlbSxcclxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICBhZGRMaWtlLFxyXG4gICAgcmVtb3ZlTGlrZSxcclxuICAgIHVzZXIsXHJcbiAgICByZW1vdmVDYXJkLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXHJcbiAgfSkge1xyXG4gICAgdGhpcy5faXRlbSA9IGl0ZW07XHJcbiAgICB0aGlzLl9uYW1lID0gaXRlbS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGl0ZW0ubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gaXRlbS5saWtlcztcclxuICAgIHRoaXMuX293bmVyID0gaXRlbS5vd25lcjtcclxuICAgIHRoaXMuX2NhcmRJZCA9IGl0ZW0uX2lkO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9hZGRMaWtlID0gYWRkTGlrZTtcclxuICAgIHRoaXMuX3JlbW92ZUxpa2UgPSByZW1vdmVMaWtlO1xyXG4gICAgdGhpcy5fdXNlciA9IHVzZXI7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VyLl9pZDtcclxuICAgIHRoaXMuX3JlbW92ZUNhcmQgPSByZW1vdmVDYXJkO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICB9XHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgdGVtcGxhdGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvclxyXG4gICAgKS5jb250ZW50O1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSB0ZW1wbGF0ZUVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgLy9zZXQgY2FyZCBpbmZvXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY2FyZC10aXRsZVwiKS50ZXh0Q29udGVudCA9XHJcbiAgICAgIHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NhcmQtdGl0bGVcIilcclxuICAgICAgLnNldEF0dHJpYnV0ZShcImFsdFwiLCB0aGlzLl9uYW1lKTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkLWltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XHJcblxyXG4gICAgLy9saWtlIGluZm9cclxuICAgIHRoaXMuX2xpa2VDb3VudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19saWtlLWNvdW50XCIpLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5fbGlrZUNvdW50O1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19oZWFydC1pY29uXCIpO1xyXG5cclxuICAgIHRoaXMuX2hlYXJ0SWNvbiA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvaGVhcnQtaWNvbi5wbmdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcclxuICAgIHRoaXMuX2hlYXJ0SWNvbkFjdGl2ZSA9IG5ldyBVUkwoXHJcbiAgICAgIFwiLi4vaW1hZ2VzL2hlYXJ0LWljb24tYWN0aXZlLnBuZ1wiLFxyXG4gICAgICBpbXBvcnQubWV0YS51cmxcclxuICAgICk7XHJcblxyXG4gICAgLy92ZXJpZmljYSBzZSBldSBqw6EgY3VydGkgbyBjYXJ0w6NvIHBhcmEgcXVlIGFwYXJlw6dhIG5hIHRlbGEgbyBib3TDo28gZGUgbGlrZSBhdGl2by4gQ29tcGFyYSBvIGlkIGRlIGNhZGEgb2JqZXRvIGRvIHZldG9yIGRlIGxpa2VzIGRvIGNhcnTDo28gY29tIG8gaWQgZG8gdXN1w6FyaW9cclxuICAgIGNvbnN0IGhhc1VzZXJMaWtlID0gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4ge1xyXG4gICAgICBpZiAobGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoaGFzVXNlckxpa2UpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdGhpcy5faGVhcnRJY29uQWN0aXZlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uc2V0QXR0cmlidXRlKFwic3JjXCIsIHRoaXMuX2hlYXJ0SWNvbik7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAvL3ZlcmlmaWNhIHNlIG8gY2FyZCBmb2kgY3JpYWRvIHBvciBtaW0gcGFyYSBtb3N0cmFyIG91IG7Do28gbyBkZWxldGUgaWNvblxyXG4gICAgdGhpcy5fZGVsZXRlSWNvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19kZWxldGUtaWNvblwiKTtcclxuXHJcbiAgICBpZiAodGhpcy5fb3duZXIuX2lkICE9PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgdGhpcy5fZGVsZXRlSWNvbi5jbGFzc0xpc3QuYWRkKFwiZ2FsbGVyeV9fZGVsZXRlLWljb25faW5hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9kZWxldGVJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5fY2FyZElkLCB0aGlzLl9lbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkLWltYWdlXCIpO1xyXG5cclxuICAgIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9lbmFibGVMaWtlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVMaWtlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5faGVhcnRJY29uU291cmNlID0gdGhpcy5fbGlrZUJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJzcmNcIik7XHJcbiAgICBpZiAodGhpcy5faGVhcnRJY29uLmhyZWYuaW5jbHVkZXModGhpcy5faGVhcnRJY29uU291cmNlKSkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLl9oZWFydEljb25BY3RpdmUpO1xyXG4gICAgICB0aGlzLl9hZGRMaWtlKHRoaXMuX2l0ZW0sIHRoaXMuX3VzZXIpO1xyXG5cclxuICAgICAgLyogYXR1YWxpemFyIGNvbnRhZ2VtIGRlIGxpa2VzICovXHJcbiAgICAgIHRoaXMuX2xpa2VDb3VudCsrO1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fbGlrZS1jb3VudFwiKS50ZXh0Q29udGVudCA9XHJcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdGhpcy5faGVhcnRJY29uKTtcclxuICAgICAgdGhpcy5fcmVtb3ZlTGlrZSh0aGlzLl9pdGVtLCB0aGlzLl91c2VySWQpO1xyXG5cclxuICAgICAgdGhpcy5fbGlrZUNvdW50LS07XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19saWtlLWNvdW50XCIpLnRleHRDb250ZW50ID1cclxuICAgICAgICB0aGlzLl9saWtlQ291bnQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHByb2ZpbGVOYW1lU2VsZWN0b3IsIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yLCB1c2VyIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5fcHJvZmlsZVBpY3R1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BpY3R1cmVcIik7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXNlck5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICB1c2VyRGVzY3JpcHRpb246IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKHVzZXIpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gdXNlci5uYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdXNlci5hYm91dDtcclxuICAgIHRoaXMuX3Byb2ZpbGVQaWN0dXJlLnNldEF0dHJpYnV0ZShcInNyY1wiLCB1c2VyLmF2YXRhcik7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cFNlY3Rpb24gPSB0aGlzLl9wb3B1cC5wYXJlbnRFbGVtZW50O1xuICAgIHRoaXMuX3BvcHVwQ2xvc2VJY29uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtaWNvblwiKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlQ2xpY2tPdXRzaWRlID0gdGhpcy5faGFuZGxlQ2xpY2tPdXRzaWRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBTZWN0aW9uLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9wb3B1cF9vcGVuZWRcIik7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwU2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfcG9wdXBfb3BlbmVkXCIpO1xuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwU2VjdGlvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tPdXRzaWRlKTtcbiAgICB0aGlzLl9wb3B1cENsb3NlSWNvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZSk7XG4gIH1cbiAgX2hhbmRsZUNsaWNrT3V0c2lkZShldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQudGFnTmFtZSA9PSBcIlNFQ1RJT05cIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcblxuICAgIHRoaXMuX3BvcHVwU2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tPdXRzaWRlKTtcblxuICAgIHRoaXMuX3BvcHVwQ2xvc2VJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLXBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLXBvcHVwX190aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oaXRlbSkge1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBpdGVtLmxpbms7XHJcbiAgICB0aGlzLl9wb3B1cFRpdGxlLnRleHRDb250ZW50ID0gaXRlbS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBmb3JtU3VibWl0ZXIsIGZvcm1SZXNldHRlciB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm1TdWJtaXRlciA9IGZvcm1TdWJtaXRlcjtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIilcclxuICAgICk7XHJcbiAgICB0aGlzLl9mb3JtUmVzZXR0ZXIgPSBmb3JtUmVzZXR0ZXI7XHJcbiAgICB0aGlzLl9zdW1iaXRIYW5kbGVyID0gdGhpcy5fc3VtYml0SGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0cy5tYXAoKGlucHV0KSA9PiBpbnB1dC52YWx1ZSk7XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9zdW1iaXRIYW5kbGVyKTtcclxuICB9XHJcbiAgX3N1bWJpdEhhbmRsZXIoZXZlbnQpIHtcclxuICAgIGNvbnN0IGlucHV0c1ZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICB0aGlzLl9mb3JtU3VibWl0ZXIoZXZlbnQsIGlucHV0c1ZhbHVlcyk7XHJcbiAgICB0aGlzLmNsb3NlKCk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX3N1bWJpdEhhbmRsZXIpO1xyXG4gICAgdGhpcy5fZm9ybVJlc2V0dGVyKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgcmVtb3ZlQ2FyZCwgY2FyZElkLCBET01FbGVtZW50IH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcmVtb3ZlQ2FyZCA9IHJlbW92ZUNhcmQ7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkSWQ7XHJcbiAgICB0aGlzLl9ET01FbGVtZW50ID0gRE9NRWxlbWVudDtcclxuICAgIHRoaXMuX2NsaWNrSGFuZGxlciA9IHRoaXMuX2NsaWNrSGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fY29uZmlybWF0aW9uQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucG9wdXAtd2l0aC1jb25maXJtYXRpb25fX3N1Ym1pdC1idXR0b25cIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9jb25maXJtYXRpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2NsaWNrSGFuZGxlcik7XHJcbiAgfVxyXG4gIF9jbGlja0hhbmRsZXIoKSB7XHJcbiAgICB0aGlzLl9yZW1vdmVDYXJkKHRoaXMuX2NhcmRJZCwgdGhpcy5fRE9NRWxlbWVudCk7XHJcbiAgICB0aGlzLmNsb3NlKCk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2NvbmZpcm1hdGlvbkJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fY2xpY2tIYW5kbGVyKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHtcclxuICBGb3JtVmFsaWRhdG9yLFxyXG4gIGNvbmZpZyxcclxuICByZXNldFZhbGlkYXRpb24sXHJcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcbmltcG9ydCBBUEkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XHJcblxyXG4vKiBJbnN0w6JuY2lhIGRhIEFQSSAqL1xyXG5jb25zdCBhcGkgPSBuZXcgQVBJKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViLXB0YnItY29ob3J0LTEzXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI0M2JlZTczMy00ZDA3LTQ4NjQtYjgzMC1kM2ZlMDZkMjk2NTlcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy9mdW7Dp8OjbyBwYXLDom1ldHJvIGRhIGNsYXNzZSBDYXJkLiBFbGEgc29saWNpdGEgbyBvYmpldG8gY29tIGluZm9ybWHDp8O1ZXMgZG8gdXN1w6FyaW8sIGNvbG9jYSBlbGUgbm8gdmV0b3IgZGUgbGlrZXMgZG8gY2FydMOjbyBlIG1hbmRhIGFzIGluZm9ybWHDp8O1ZXMgZG8gY2FydMOjbyBwYXJhIG8gc2Vydmlkb3IgcGFyYSBhdHVhbGl6YcOnw6NvXHJcbmZ1bmN0aW9uIGFkZExpa2UoaXRlbSwgdXNlcikge1xyXG4gIGl0ZW0ubGlrZXMucHVzaCh1c2VyKTtcclxuICBjb25zdCBjYXJkSWQgPSBpdGVtLl9pZDtcclxuXHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZExpa2UoaXRlbSwgY2FyZElkKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH0pO1xyXG59XHJcbi8vZnVuw6fDo28gcGFyw6JtZXRybyBkYSBjbGFzc2UgQ2FyZC4gRWxhIHNvbGljaXRhIG8gb2JqZXRvIGNvbSBpbmZvcm1hw6fDtWVzIGRvIHVzdcOhcmlvLCByZW1vdmUgZWxlIGRvIHZldG9yIGRlIGxpa2VzIGRvIGNhcnTDo28gZSBtYW5kYSBhcyBpbmZvcm1hw6fDtWVzIGRvIGNhcnTDo28gcGFyYSBvIHNlcnZpZG9yIHBhcmEgYXR1YWxpemHDp8Ojb1xyXG5mdW5jdGlvbiByZW1vdmVMaWtlKGl0ZW0sIHVzZXJJZCkge1xyXG4gIGl0ZW0ubGlrZXMgPSBpdGVtLmxpa2VzLmZpbHRlcigobGlrZSkgPT4ge1xyXG4gICAgaWYgKGxpa2UuX2lkICE9IHVzZXJJZCkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICB9KTtcclxuICBjb25zdCBjYXJkSWQgPSBpdGVtLl9pZDtcclxuXHJcbiAgYXBpXHJcbiAgICAucmVtb3ZlQ2FyZExpa2UoaXRlbSwgY2FyZElkKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH0pO1xyXG59XHJcbi8vZnVuw6fDo28gcGFyw6JtZXRybyBkYSBjbGFzc2UgUG9wdXBXaXRoQ29uZmlybWF0aW9uLiBFbGEgZGVsZXRhIG8gY2FyZCBkbyBzZXJ2aWRvciB1c2FuZG8gYSBpbnN0w6JuY2lhIGRhIGNsYXNzZSBBUEkgZSByZW1vdmUgbyBjYXJkIGRhIMOhcnZvcmUgRE9NXHJcbmZ1bmN0aW9uIHJlbW92ZUNhcmQoY2FyZElkLCBET01FbGVtZW50KSB7XHJcbiAgYXBpXHJcbiAgICAuZGVsZXRlQ2FyZChjYXJkSWQpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG5cclxuICAgICAgRE9NRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH0pO1xyXG59XHJcbi8vZnVuw6fDo28gcGFyw6JtZXRybyBkZSBDYXJkIGRpdGEgbyBxdWUgb2NvcnJlIHF1YW5kbyBzZSBjbGljYSBubyBkZWxldGUgaWNvblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljayhjYXJkSWQsIERPTUVsZW1lbnQpIHtcclxuICBjb25zdCBwb3B1cFdpdGhDb25maXJtYXRpb24gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKHtcclxuICAgIHBvcHVwU2VsZWN0b3I6IFwiLnBvcHVwLXdpdGgtY29uZmlybWF0aW9uX19jb250YWluZXJcIixcclxuICAgIHJlbW92ZUNhcmQsXHJcbiAgICBjYXJkSWQsXHJcbiAgICBET01FbGVtZW50LFxyXG4gIH0pO1xyXG5cclxuICBwb3B1cFdpdGhDb25maXJtYXRpb24ub3BlbigpO1xyXG59XHJcblxyXG4vKiBCdXNjYSB1c3XDoXJpbyBlIGRlcG9pcyBkaXNzbyBjb2xvY2Egb3MgY2FyZHMgbmEgdGVsYSAqL1xyXG5sZXQgdXNlcjtcclxubGV0IGNhcmRSZW5kZXJlcjtcclxubGV0IHBvcHVwV2l0aEltYWdlO1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG59KTtcclxuYXBpXHJcbiAgLmdldFVzZXIoKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfSlcclxuICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICB1c2VyID0gcmVzdWx0O1xyXG5cclxuICAgIC8vIENhcnJlZ2EgaW5mb3JtYcOnw7VlcyBkbyB1c3XDoXJpbyBuYSB0ZWxhXHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyKTtcclxuXHJcbiAgICAvKiBDYXJ0w7VlcyBpbmljaWFpcyBzZW5kbyBhZGljaW9uYWRvcyBhc3NpbSBxdWUgYSBww6FnaW5hIGNhcnJlZ2EgKi9cclxuICAgIGFwaVxyXG4gICAgICAuZ2V0SW5pdGlhbENhcmRzKClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChjYXJkcykgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGNhcmRzKTtcclxuICAgICAgICBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5pbWFnZS1wb3B1cF9fY29udGFpbmVyXCIpO1xyXG4gICAgICAgIGNhcmRSZW5kZXJlciA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpdGVtczogY2FyZHMsXHJcbiAgICAgICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XHJcbiAgICAgICAgICAgICAgICBpdGVtLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVTZWxlY3RvcjogXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoaXRlbSkgPT4gcG9wdXBXaXRoSW1hZ2Uub3BlbihpdGVtKSxcclxuICAgICAgICAgICAgICAgIGFkZExpa2UsXHJcbiAgICAgICAgICAgICAgICByZW1vdmVMaWtlLFxyXG4gICAgICAgICAgICAgICAgdXNlcixcclxuICAgICAgICAgICAgICAgIHJlbW92ZUNhcmQsXHJcbiAgICAgICAgICAgICAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgICAgICAgICAgIGNhcmRSZW5kZXJlci5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBcIi5nYWxsZXJ5X19jYXJkc1wiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjYXJkUmVuZGVyZXIucmVuZGVySXRlbXMoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgfSk7XHJcblxyXG4vKiBBcGxpY2FyIHZhbGlkYcOnw6NvIGFvcyBmb3JtdWzDoXJpb3MgKi9cclxuY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LmZvcm1zKTtcclxuXHJcbmZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgY29uc3QgdmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gIHZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbihjb25maWcsIGZvcm1FbGVtZW50KTtcclxufSk7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwV2l0aEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIuZWRpdC1wcm9maWxlLXBvcHVwX19jb250YWluZXJcIixcclxuICBmb3JtU3VibWl0ZXI6IChldmVudCwgaW5wdXRzVmFsdWVzKSA9PiB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGNvbnN0IG5hbWUgPSBpbnB1dHNWYWx1ZXNbMF07XHJcbiAgICBjb25zdCBhYm91dCA9IGlucHV0c1ZhbHVlc1sxXTtcclxuXHJcbiAgICAvL1VYXHJcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtcHJvZmlsZS1wb3B1cF9fc3VibWl0LWJ1dHRvblwiKTtcclxuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2FsdmFuZG8uLi5cIjtcclxuXHJcbiAgICAvL2F0dWFsaXphIG9zIGRhZG9zIGRvIHVzdcOhcmlvIG5vIHNlcnZpZG9yXHJcbiAgICBhcGlcclxuICAgICAgLnNhdmVQcm9maWxlSW5mbyhuYW1lLCBhYm91dClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICB1c2VyID0gcmVzdWx0O1xyXG4gICAgICAgIC8vcGVnYSBvcyBkYWRvcyBhdHVhbGl6YWRvcyBkbyB1c3XDoXJpbyBlIG1vc3RyYSBuYSB0ZWxhXHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlcik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNhbHZhclwiO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG4gIGZvcm1SZXNldHRlcjogcmVzZXRWYWxpZGF0aW9uLFxyXG59KTtcclxuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtaWNvblwiKTtcclxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAvKiBxdWFuZG8gbyBwb3B1cCBkZSBlZGl0YXIgcGVyZmlsIGZvciBhYmVydG8sIG9zIGRhZG9zIGRvIHVzdcOhcmlvIGrDoSB2w6NvIGFwYXJlY2VyIG5vcyBjYW1wb3MqL1xyXG4gIGNvbnN0IGluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1wcm9maWxlLXBvcHVwX19pbnB1dF9uYW1lXCIpLnZhbHVlID1cclxuICAgIGluZm8udXNlck5hbWU7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXByb2ZpbGUtcG9wdXBfX2lucHV0X2Fib3V0XCIpLnZhbHVlID1cclxuICAgIGluZm8udXNlckRlc2NyaXB0aW9uO1xyXG4gIGVkaXRQcm9maWxlUG9wdXBXaXRoRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwV2l0aEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIuYWRkLWNhcmQtcG9wdXBfX2NvbnRhaW5lclwiLFxyXG4gIGZvcm1TdWJtaXRlcjogKGV2ZW50LCBpbnB1dHNWYWx1ZXMpID0+IHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgY29uc3QgbmFtZSA9IGlucHV0c1ZhbHVlc1swXTtcclxuICAgIGNvbnN0IGxpbmsgPSBpbnB1dHNWYWx1ZXNbMV07XHJcblxyXG4gICAgLy9VWFxyXG4gICAgY29uc3QgY3JlYXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuYWRkLWNhcmQtcG9wdXBfX3N1Ym1pdC1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIGNyZWF0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2FsdmFuZG8uLi5cIjtcclxuXHJcbiAgICBhcGlcclxuICAgICAgLmFkZENhcmQobmFtZSwgbGluaylcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSByZXN1bHQ7XHJcblxyXG4gICAgICAgIC8vY3JpYXIgYSBpbnN0w6JuY2lhIGRvIGNhcmQgZSBhZGljaW9uw6EtbG8gbmEgdGVsYVxyXG4gICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XHJcbiAgICAgICAgICBpdGVtLFxyXG4gICAgICAgICAgdGVtcGxhdGVTZWxlY3RvcjogXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoaXRlbSkgPT4gcG9wdXBXaXRoSW1hZ2Uub3BlbihpdGVtKSxcclxuICAgICAgICAgIGFkZExpa2UsXHJcbiAgICAgICAgICByZW1vdmVMaWtlLFxyXG4gICAgICAgICAgdXNlcixcclxuICAgICAgICAgIHJlbW92ZUNhcmQsXHJcbiAgICAgICAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgICAgY2FyZFJlbmRlcmVyLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgY3JlYXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCJDcmlhclwiO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAvKkRlcG9pcyBxdWUgdW0gY2FyZCDDqSBhZGljaW9uYWRvLCBuYSBwcsOzeGltYSB2ZXogcXVlIG8gcG9wdXAgZm9yIGFiZXJ0bywgbyBib3TDo28gY3JpYXIgasOhIGVzdGFyw6EgZGVzYXRpdmFkbyAqL1xyXG4gICAgY3JlYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiKTtcclxuICAgIGNyZWF0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICB9LFxyXG4gIGZvcm1SZXNldHRlcjogcmVzZXRWYWxpZGF0aW9uLFxyXG59KTtcclxuXHJcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkUG9wdXBXaXRoRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgcHJvZmlsZVBpY3R1cmVQb3B1cFdpdGhGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiLnVwZGF0ZS1wcm9maWxlLXBpY3R1cmUtcG9wdXBfX2NvbnRhaW5lclwiLFxyXG4gIGZvcm1TdWJtaXRlcjogKGV2ZW50LCBpbnB1dHNWYWx1ZXMpID0+IHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgY29uc3QgYXZhdGFyID0gaW5wdXRzVmFsdWVzWzBdO1xyXG5cclxuICAgIC8vVVhcclxuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnVwZGF0ZS1wcm9maWxlLXBpY3R1cmUtcG9wdXBfX3N1Ym1pdC1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2FsdmFuZG8uLi5cIjtcclxuXHJcbiAgICBhcGlcclxuICAgICAgLnVwZGF0ZVByb2ZpbGVQaWN0dXJlKGF2YXRhcilcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2FsdmFyXCI7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbiAgZm9ybVJlc2V0dGVyOiByZXNldFZhbGlkYXRpb24sXHJcbn0pO1xyXG5jb25zdCBwcm9maWxlUGljdHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcGljdHVyZS1jb250YWluZXJcIik7XHJcbnByb2ZpbGVQaWN0dXJlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJvZmlsZVBpY3R1cmVQb3B1cFdpdGhGb3JtLm9wZW4oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFQSSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG4gIGdldFVzZXIoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuICBzYXZlUHJvZmlsZUluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcbiAgYWRkQ2FyZChuYW1lLCBsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGFkZENhcmRMaWtlKGl0ZW0sIGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShpdGVtKSxcclxuICAgIH0pO1xyXG4gIH1cclxuICByZW1vdmVDYXJkTGlrZShpdGVtLCBjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBpdGVtIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcbiAgdXBkYXRlUHJvZmlsZVBpY3R1cmUoYXZhdGFyKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXIgfSksXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsIm8iLCJvYmoiLCJwcm9wIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicCIsImIiLCJkb2N1bWVudCIsImJhc2VVUkkiLCJzZWxmIiwibG9jYXRpb24iLCJocmVmIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9pbnB1dHNTZWxlY3RvciIsImlucHV0c1NlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnRTZWxlY3RvciIsImJ1dHRvbkVsZW1lbnRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Q2xhc3MiLCJidXR0b25FbGVtZW50Q2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50Iiwia2V5IiwidmFsdWUiLCJfdmFsaWRhdGVJbnB1dHMiLCJfdGhpcyIsImlucHV0cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2lzVmFsaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50VmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9zaG93SW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJlcnJvckVsZW1lbnQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ0ZXh0Q29udGVudCIsInNvbWUiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JtcyIsInJlc2V0IiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiQ2FyZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJhZGRMaWtlIiwicmVtb3ZlTGlrZSIsInVzZXIiLCJyZW1vdmVDYXJkIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJfaXRlbSIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX293bmVyIiwib3duZXIiLCJfY2FyZElkIiwiX2lkIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2FkZExpa2UiLCJfcmVtb3ZlTGlrZSIsIl91c2VyIiwiX3VzZXJJZCIsIl9yZW1vdmVDYXJkIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwic3JjIiwiX2xpa2VDb3VudCIsImxlbmd0aCIsIl9saWtlQnV0dG9uIiwiX2hlYXJ0SWNvbiIsIlVSTCIsIl9oZWFydEljb25BY3RpdmUiLCJsaWtlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2RlbGV0ZUljb24iLCJfdGhpczIiLCJfZW5hYmxlTGlrZUJ1dHRvbiIsIl9oZWFydEljb25Tb3VyY2UiLCJnZXRBdHRyaWJ1dGUiLCJpbmNsdWRlcyIsIlVzZXJJbmZvIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVEZXNjcmlwdGlvbiIsIl9wcm9maWxlUGljdHVyZSIsInVzZXJOYW1lIiwidXNlckRlc2NyaXB0aW9uIiwiYWJvdXQiLCJhdmF0YXIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfcG9wdXBTZWN0aW9uIiwicGFyZW50RWxlbWVudCIsIl9wb3B1cENsb3NlSWNvbiIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfaGFuZGxlQ2xpY2tPdXRzaWRlIiwiY2xvc2UiLCJzZXRFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsInRhZ05hbWUiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9jYWxsU3VwZXIiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRpdGxlIiwiX2luaGVyaXRzIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXRlciIsImZvcm1SZXNldHRlciIsIl9mb3JtU3VibWl0ZXIiLCJfcG9wdXBGb3JtIiwiX2lucHV0cyIsIl9mb3JtUmVzZXR0ZXIiLCJfc3VtYml0SGFuZGxlciIsIm1hcCIsImlucHV0IiwiX3N1cGVyUHJvcEdldCIsImlucHV0c1ZhbHVlcyIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImNhcmRJZCIsIkRPTUVsZW1lbnQiLCJfRE9NRWxlbWVudCIsIl9jbGlja0hhbmRsZXIiLCJfY29uZmlybWF0aW9uQnV0dG9uIiwiY2FyZFJlbmRlcmVyIiwicG9wdXBXaXRoSW1hZ2UiLCJhcGkiLCJBUEkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJmZXRjaCIsImNvbmNhdCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYXV0aG9yaXphdGlvbiIsInB1c2giLCJhZGRDYXJkTGlrZSIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyb3IiLCJ1c2VySWQiLCJmaWx0ZXIiLCJyZW1vdmVDYXJkTGlrZSIsImRlbGV0ZUNhcmQiLCJvcGVuIiwidXNlckluZm8iLCJnZXRVc2VyIiwic2V0VXNlckluZm8iLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkcyIsImNhcmQiLCJjYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsImVuYWJsZVZhbGlkYXRpb24iLCJlZGl0UHJvZmlsZVBvcHVwV2l0aEZvcm0iLCJwcmV2ZW50RGVmYXVsdCIsImJ1dHRvbiIsInNhdmVQcm9maWxlSW5mbyIsImZpbmFsbHkiLCJpbmZvIiwiZ2V0VXNlckluZm8iLCJhZGRDYXJkUG9wdXBXaXRoRm9ybSIsImNyZWF0ZUJ1dHRvbiIsImFkZENhcmQiLCJwcm9maWxlUGljdHVyZVBvcHVwV2l0aEZvcm0iLCJ1cGRhdGVQcm9maWxlUGljdHVyZSIsInVzZXJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==